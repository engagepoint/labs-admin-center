<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:uib="http://engagepoint.com/uib"
	xmlns:ui-paginator="http://java.sun.com/jsf/composite/uibootstrap/components/paginator"
	template="/WEB-INF/templates/default.xhtml">

	<ui:define name="page">

		<h:form id="preferencesForm">
			<h2>
				<h:outputText value="Preferences administration" />
			</h2>

			<p:treeTable id="treeTable" value="#{documentsController.root}"
				 var="doc">


				<f:facet name="header">
                    Properties Viewer

                </f:facet>

				<p:column style="width:32%">
					<f:facet name="header">
                        File

                    </f:facet>


					<h:outputText value="#{doc.name}" />



				</p:column>

				<p:column style="width:32%">
					<f:facet name="header">
                        Value
                    </f:facet>


					<h:outputText value="#{doc.value}" />

				</p:column>

				<p:column style="width:10%">
					<f:facet name="header">
                        Type
                    </f:facet>



					<h:outputText value="#{doc.type}" />

				</p:column>
				<p:column id="column" style="width:10%">
					<f:facet name="header">
					</f:facet>
					<p:commandButton value="Edit" id="editButton" title="Edit"
						update="treeTable" oncomplete="editDialog.show()"
						styleClass="ui-button-icon-only secondary small"
						icon="ui-icon-edit">
						<f:setPropertyActionListener value="#{doc}"
							target="#{documentsController.selectedDoc}" />
					</p:commandButton>

					<p:commandButton value="Delete" title="Delete" update="treeTable"
						oncomplete="deleteDialog.show()"
						styleClass="ui-button-icon-only secondary small"
						icon="ui-icon-remove">
						<f:setPropertyActionListener value="#{doc}"
							target="#{documentsController.selectedDoc}" />
					</p:commandButton>


					<!--Edit dialog-->
					<p:dialog header="Edit" widgetVar="editDialog" resizable="false"
						id="editDlg" showEffect="fade" hideEffect="explode" modal="true">
						<h:panelGrid id="editPanelGrid" columns="2" cellpadding="4">
							<h:outputText value="Name:" />
							<p:inputText value="#{documentsController.selectedDoc.name}" />
							<h:outputText value="Value:" />
							<p:inputText value="#{documentsController.selectedDoc.value}" />
							<h:outputText value="Type:" />
							<p:inputText value="#{documentsController.selectedDoc.type}" />
							<p:commandButton value="Ok" update="treeTable"
								oncomplete="editDialog.hide()" styleClass="ui-confirmdialog-yes"
								icon="ui-icon-check"
								actionListener="#{documentsController.editDocument}" />
							<p:commandButton value="Cancel" oncomplete="editDialog.hide()"
								action="cancel" process="@this" styleClass="ui-confirmdialog-no"
								icon="ui-icon-close" />
						</h:panelGrid>
					</p:dialog>

					<!--Delete dialog-->
					<p:dialog header="Delete" widgetVar="deleteDialog"
						resizable="false" id="delDlg" showEffect="fade"
						hideEffect="explode" modal="true">
						<h:panelGrid columns="1" cellpadding="4">
							<h:outputText
								value="Name: #{documentsController.selectedDoc.name}" />
							<h:outputText
								value="Value: #{documentsController.selectedDoc.value}" />
							<h:outputText
								value="Type: #{documentsController.selectedDoc.type}" />
						</h:panelGrid>

						<p:commandButton value="Ok"
							action="#{documentsController.deleteNode()}" ajax="false"
							oncomplete="deleteDialog.hide()"
							styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
						<p:commandButton value="Cancel" oncomplete="deleteDialog.hide()"
							styleClass="ui-confirmdialog-no" icon="ui-icon-close" />

					</p:dialog>
				</p:column>


			</p:treeTable>




		</h:form>
	</ui:define>
</ui:composition>