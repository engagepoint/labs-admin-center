<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">
    <ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                    template="./jsfTemplate.xhtml"
                    xmlns:ez="http://java.sun.com/jsf/composite/ezcomp"
                    xmlns:h="http://java.sun.com/jsf/html"
                    xmlns:p="http://primefaces.org/ui"
                    xmlns:f="http://java.sun.com/jsf/core">


        <ui:define name="top">
            <h2>Administration Center</h2>

        </ui:define>

        <ui:define name="left">
            <p:outputLabel value="Menu"/>
        </ui:define>

        <ui:define name="content">

             <h:form id="form">  

            <p:contextMenu for="treeTable">  
                <p:menuitem value="View" update="documentPanel" icon="ui-icon-search" oncomplete="PF('documentDialog').show()"/>  
                <p:menuitem value="Add new Node"   actionListener="#{documentsController.addNode}" update="treeTable" />  
                <p:menuitem value="Update" update="updateNodePanel"  oncomplete="PF('updateNodeDialog').show()"/>  
                <p:menuitem value="Delete" actionListener="#{documentsController.deleteNode}" update="treeTable"/> 
            </p:contextMenu>  

            <p:treeTable value="#{documentsController.root}" var="document" id="treeTable"   
                         selectionMode="single"  selection="#{documentsController.selectedNode}" >  

                <f:facet name="header" >
                    Properties Viewer
                </f:facet>

                <p:column style="width:32%">
                    <f:facet name="header">
                        File
                        <p:commandLink update="treeTable" actionListener="#{documentsController.addRootNode}" title="Add Node" styleClass="ui-icon ui-icon-search" />
                    </f:facet>               
                    <p:inplace id="nameInplace" editor="true" event="dblclick">  
                     <p:inputText value="#{document.name}"  
                            required="true" label="text" />  
                    </p:inplace>  
                </p:column>

                <p:column style="width:32%">
                    <f:facet name="header">
                        Value
                    </f:facet>
             
                    <p:inplace id="valueInplace" editor="true" event="dblclick">  
                     <p:inputText value="#{document.value}"  
                            required="true" label="text" />  
                    </p:inplace> 
                </p:column>

                <p:column style="width:32%">
                    <f:facet name="header">
                        Type
                    </f:facet>
                    
                    <p:inplace id="typeInplace" label="#{document.type}" editor="true" event="dblclick">  
                         <p:inputText value="#{document.type}"  
                            required="true" label="text" />  
                    </p:inplace> 
                </p:column>

                <p:column style="width:4%">
                    <f:facet name="header">
                        Edit
                    </f:facet>
                    <p:menuButton value=""  id="menuButton" >  
                        <p:menuitem value="View"  update=":form:documentPanel"  oncomplete="PF('documentDialog').show()" >
                                <f:setPropertyActionListener value="#{documentsController.selectedNode}"   
                                                                     class="" target="#{documentsController.selectedNode}" />  
                        </p:menuitem>
                        <p:menuitem value="Add new Node" update=":form:addNodePanel" onclick="PF('addNodeDialog').show()"/>  
                        <p:menuitem value="Update" update=":form:updateNodePanel" onclick="PF('updateNodeDialog').show()"/>  
           
                        <p:menuitem value="Delete" />  
                    </p:menuButton>  



                </p:column>
            </p:treeTable>  

            

            <p:dialog header="Document Detail" showEffect="fade" widgetVar="documentDialog" modal="true">  
                <p:outputPanel id="documentPanel">  
                    <h:panelGrid  columns="2" cellpadding="5" rendered="#{not empty documentsController.selectedNode}">  
                        <h:outputLabel for="name" value="Name: " />  
                        <h:outputText id="name" value="#{documentsController.selectedNode.data.name}" style="font-weight:bold" />  

                        <h:outputLabel for="value" value="Size: " />  
                        <h:outputText id="value" value="#{documentsController.selectedNode.data.value}" style="font-weight:bold" />  

                        <h:outputLabel for="type" value="Type " />  
                        <h:outputText id="type" value="#{documentsController.selectedNode.data.type}" style="font-weight:bold" />  

                        <h:outputLabel for="test" value="Test: " />  
                        <h:outputText id="test" value="#{documentsController.selectedNode.data.string}" style="font-weight:bold" /> 

                    </h:panelGrid>  
                </p:outputPanel>  
            </p:dialog>  

    

             <p:dialog  header="Add New Node" widgetVar="addNodeDialog" modal="true">
               <p:outputPanel id="addNodePanel">
                <h:panelGrid  columns="2">
                    <h:outputLabel  value="Name: " />
                    <p:inputText />  
                    <h:outputLabel  value="Value: " />
                    <p:inputText  />  
                    <h:outputLabel  value="Type: " />
                    <p:selectOneMenu >  
                        <f:selectItem itemLabel="11" itemValue="" />  
                        <f:selectItem itemLabel="File" itemValue="1" />  
                        <f:selectItem itemLabel="Int" itemValue="2" />  
                        <f:selectItem itemLabel="Float" itemValue="3" />  
                        <f:selectItem itemLabel="Byte Arr" itemValue="4" />  
                        <f:selectItem itemLabel="Double" itemValue="5" />  
                        <f:selectItem itemLabel="String" itemValue="6" />  
                    </p:selectOneMenu>  
                    <p:commandButton value="OK" oncomplete="PF('addNodeDialog').hide();"  update="treeTable"></p:commandButton>
                    <p:commandButton value="Cancel" oncomplete="PF('addNodeDialog').hide();"></p:commandButton>
                </h:panelGrid>
               </p:outputPanel>
            </p:dialog>
            
                <p:dialog  header="Update Node" widgetVar="updateNodeDialog" modal="true">
               <p:outputPanel id="updateNodePanel">
                <h:panelGrid  columns="2">
                    <h:outputLabel for="name" value="Name: " />
                    <p:inputText />
                    <h:outputLabel  value="Value: " />
                    <p:inputText />  
                    <h:outputLabel  value="Type: " />
                    <p:selectOneMenu >  
                        <f:selectItem itemLabel="Select One" itemValue="" />  
                        <f:selectItem itemLabel="File" itemValue="1" />  
                        <f:selectItem itemLabel="Int" itemValue="2" />  
                        <f:selectItem itemLabel="Float" itemValue="3" />  
                        <f:selectItem itemLabel="Byte Arr" itemValue="4" />  
                        <f:selectItem itemLabel="Double" itemValue="5" />  
                        <f:selectItem itemLabel="String" itemValue="6" />  
                    </p:selectOneMenu>  
                    <p:commandButton value="OK" oncomplete="PF('updateNodeDialog').hide();"></p:commandButton>
                    <p:commandButton value="Cancel" oncomplete="PF('updateNodeDialog').hide();"></p:commandButton>
                </h:panelGrid>
               </p:outputPanel>
            </p:dialog>

  



        </h:form>  
        </ui:define>

        <ui:define name="bottom">

            <h:outputLabel value="Bottom"/>

        </ui:define>

    </ui:composition>
</html>
